"use strict";const popupLinks=document.querySelectorAll(".popup-link"),body=document.querySelector("body"),header=document.querySelector(".header"),lockPadding=document.querySelectorAll(".lock-padding");let unlock=!0;const timeout=800;if(popupLinks.length>0)for(let e=0;e<popupLinks.length;e++){const t=popupLinks[e];t.addEventListener("click",(function(e){const o=t.getAttribute("href").replace("#","");popupOpen(document.getElementById(o)),e.preventDefault()}))}const popupCloseIcon=document.querySelectorAll(".close-popup");if(popupCloseIcon.length>0)for(let e=0;e<popupCloseIcon.length;e++){const t=popupCloseIcon[e];t.addEventListener("click",(function(e){popupClose(t.closest(".popup")),e.preventDefault()}))}function popupOpen(e){if(e&&unlock){const t=document.querySelector(".popup.open");t?popupCloseIcon(t,!1):bodyLock(),e.classList.add("open"),e.addEventListener("click",(function(e){e.target.closest(".popup__content")||popupClose(e.target.closest(".popup"))}))}}function popupClose(e,t=!0){unlock&&(e.classList.remove("open"),t&&bodyUnlock())}function bodyLock(){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";if(lockPadding.length>0)for(let t=0;t<lockPadding.length;t++){lockPadding[t].style.paddingRight=e}body.style.paddingRight=e,header.style.paddingRight=e,body.classList.add("lock"),unlock=!1,setTimeout((function(){unlock=!0}),800)}function bodyUnlock(){setTimeout((function(){if(lockPadding.length>0)for(let e=0;e<lockPadding.length;e++){lockPadding[e].style.paddingRight="0px"}body.style.paddingRight="0px",header.style.paddingRight="0px",body.classList.remove("lock")}),800),unlock=!1,setTimeout((function(){unlock=!0}),800)}function DynamicAdapt(e){this.type=e}document.addEventListener("keydown",(function(e){if(27===e.which){popupClose(document.querySelector(".popup.open"))}})),DynamicAdapt.prototype.init=function(){const e=this;this.оbjects=[],this.daClassname="_dynamic_adapt_",this.nodes=document.querySelectorAll("[data-da]");for(let e=0;e<this.nodes.length;e++){const t=this.nodes[e],o=t.dataset.da.trim().split(","),s={};s.element=t,s.parent=t.parentNode,s.destination=document.querySelector(o[0].trim()),s.breakpoint=o[1]?o[1].trim():"767",s.place=o[2]?o[2].trim():"last",s.index=this.indexInParent(s.parent,s.element),this.оbjects.push(s)}this.arraySort(this.оbjects),this.mediaQueries=Array.prototype.map.call(this.оbjects,(function(e){return"("+this.type+"-width: "+e.breakpoint+"px),"+e.breakpoint}),this),this.mediaQueries=Array.prototype.filter.call(this.mediaQueries,(function(e,t,o){return Array.prototype.indexOf.call(o,e)===t}));for(let t=0;t<this.mediaQueries.length;t++){const o=this.mediaQueries[t],s=String.prototype.split.call(o,","),n=window.matchMedia(s[0]),i=s[1],l=Array.prototype.filter.call(this.оbjects,(function(e){return e.breakpoint===i}));n.addListener((function(){e.mediaHandler(n,l)})),this.mediaHandler(n,l)}},DynamicAdapt.prototype.mediaHandler=function(e,t){if(e.matches)for(let e=0;e<t.length;e++){const o=t[e];o.index=this.indexInParent(o.parent,o.element),this.moveTo(o.place,o.element,o.destination)}else for(let e=0;e<t.length;e++){const o=t[e];o.element.classList.contains(this.daClassname)&&this.moveBack(o.parent,o.element,o.index)}},DynamicAdapt.prototype.moveTo=function(e,t,o){t.classList.add(this.daClassname),"last"===e||e>=o.children.length?o.insertAdjacentElement("beforeend",t):"first"!==e?o.children[e].insertAdjacentElement("beforebegin",t):o.insertAdjacentElement("afterbegin",t)},DynamicAdapt.prototype.moveBack=function(e,t,o){t.classList.remove(this.daClassname),void 0!==e.children[o]?e.children[o].insertAdjacentElement("beforebegin",t):e.insertAdjacentElement("beforeend",t)},DynamicAdapt.prototype.indexInParent=function(e,t){const o=Array.prototype.slice.call(e.children);return Array.prototype.indexOf.call(o,t)},DynamicAdapt.prototype.arraySort=function(e){"min"===this.type?Array.prototype.sort.call(e,(function(e,t){return e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?-1:"last"===e.place||"first"===t.place?1:e.place-t.place:e.breakpoint-t.breakpoint})):Array.prototype.sort.call(e,(function(e,t){return e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?1:"last"===e.place||"first"===t.place?-1:t.place-e.place:t.breakpoint-e.breakpoint}))};const da=new DynamicAdapt("max");da.init();let sliders=document.querySelectorAll("._swiper");if(sliders){for(let e=0;e<sliders.length;e++){let t=sliders[e],o=document.createElement("div");if(!t.classList.contains("swiper-bild")){let e=t.children;if(e)for(let t=0;t<e.length;t++){e[t].classList.add("swiper-slide")}let s=t.innerHTML;o.classList.add("swiper-wrapper"),o.innerHTML=s,t.innerHTML="",t.appendChild(o),t.classList.add("swiper-bild")}t.classList.contains("_gallery")&&o.classList.add("_gallery")}sliders_bild_callback()}function sliders_bild_callback(e){}if(document.querySelector(".certificates__slider")){new Swiper(".certificates__slider",{observer:!0,observeParents:!0,slidesPerView:2,spaceBetween:50,autoHeight:!0,speed:800,simulateTouch:!0,navigation:{nextEl:".certificates__arrow.arrow__right",prevEl:".certificates__arrow.arrow__left"},breakpoints:{320:{spaceBetween:10},768:{spaceBetween:30},992:{spaceBetween:40},1268:{spaceBetween:50}},on:{lazyImageReady:function(){ibg()}}})}if(document.querySelector(".products__items")){new Swiper(".slider-body",{observer:!0,observeParents:!0,slidesPerView:3,spaceBetween:40,speed:800,touchRatio:1,simulateTouch:!0,navigation:{nextEl:".products__arrow.arrow__right",prevEl:".products__arrow.arrow__left"},breakpoints:{320:{slidesPerView:1},768:{slidesPerView:2},992:{slidesPerView:3}},on:{lazyImageReady:function(){ibg()}}})}if(document.querySelector(".welcome__images")){new Swiper(".welcome__images",{effect:"fade",fadeEffect:{crossFade:!0},autoplay:{delay:3e3,disableOnInteraction:!1},observer:!0,observeParents:!0,slidesPerView:1,spaceBetween:0,autoHeight:!0,speed:800,loop:!0,preLoadImages:!1,Lazy:!0,navigation:{nextEl:".welcome__arrow.arrow__right",prevEl:".welcome__arrow.arrow__left"},on:{lazyImageReady:function(){ibg()}}})}function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}testWebP((function(e){!0===e?document.querySelector("html").classList.add("_webp"):document.querySelector("html").classList.add("_no-webp")}));const burger=document.querySelector(".icon-menu"),mobileMenu=document.querySelector(".nav-bottom-header"),classNameActive="_active",classNameLock="lock",elements=[burger,mobileMenu];function toggleClass(e,t,o){e.forEach(e=>e.classList.toggle(t)),document.querySelector("body").classList.toggle(o)}function ibg(){let e=document.querySelectorAll(".ibg");for(var t=0;t<e.length;t++)e[t].querySelector("img")&&(e[t].style.backgroundImage="url("+e[t].querySelector("img").getAttribute("src")+")")}burger.onclick=()=>toggleClass(elements,"_active","lock"),ibg();const navLinks=document.querySelectorAll("._add");if(navLinks.length>0)for(let e=0;e<navLinks.length;e++){const t=navLinks[e];t.addEventListener("click",(function(e){t.classList.toggle("_active"),e.preventDefault()}))}const anchors=document.querySelectorAll('a[href*="#"]');for(let e of anchors)e.classList.contains("popup-link")||e.classList.contains("popup__close")||e.addEventListener("click",(function(t){t.preventDefault();const o=e.getAttribute("href").substr(1);document.getElementById(o).scrollIntoView({behavior:"smooth",block:"start"})}));let gallery=document.querySelectorAll("._gallery");function gallery_init(){for(let e=0;e<gallery.length;e++){const t=gallery[e];lightGallery(t,{counter:!1,selector:"a",download:!1})}}gallery&&gallery_init();let spollers=document.querySelectorAll("._spoller");const assortmentFilter=document.querySelector(".assortment__filter ");let readMore=document.querySelector(".read-more"),spollersGo=!0;spollers.length>0&&setTimeout((function(){spollersShowActive(),spollersInit()}),0);let _slideUp=(e,t=500)=>{e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout(()=>{e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")},t)},_slideDown=(e,t=500)=>{e.style.removeProperty("display");let o=window.getComputedStyle(e).display;"none"===o&&(o="block"),e.style.display=o;let s=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=s+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout(()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")},t)},_slideToggle=(e,t=500)=>{if(!e.classList.contains("_slide"))return e.classList.add("_slide"),"none"===window.getComputedStyle(e).display?_slideDown(e,t):_slideUp(e,t)};function spollerCLick(e){const t=e.target.classList.contains("_spoller")?e.target:e.target.closest("._spoller");if(spollersGo){if(spollersGo=!1,t.closest("._spollers").classList.contains("_one")){let e=t.closest("._spollers").querySelectorAll("._spoller");for(let o=0;o<e.length;o++){let s=e[o];s!=t&&(s.classList.remove("_active"),_slideUp(s.nextElementSibling))}}t.classList.toggle("_active"),assortmentFilter&&assortmentFilter.classList.toggle("_active"),readMore&&readMore.classList.toggle("_active"),_slideToggle(t.nextElementSibling),setTimeout((function(){spollersGo=!0}),500)}}function spollersInit(){for(let e=0;e<spollers.length;e++){const t=spollers[e];let o=t.getAttribute("data-max");o&&window.innerWidth>o?t.classList.contains("_init")&&(t.classList.remove("_active"),t.classList.remove("_init"),t.nextElementSibling.style.cssText="",t.removeEventListener("click",spollerCLick)):t.classList.contains("_init")||(t.classList.add("_init"),t.addEventListener("click",spollerCLick))}}function spollersShowActive(){for(let e=0;e<spollers.length;e++){const t=spollers[e];t.classList.contains("_active")&&_slideToggle(t.nextElementSibling)}}const breakpoint=window.matchMedia("(max-width:767.98px)");let filterBody=document.querySelector(".filter__body");const breakpointChecker=function(){if(!0!==breakpoint.matches)spollersShowActive(),spollersInit();else{assortmentFilter.classList.add("_active");for(let e=0;e<spollers.length;e++){const t=spollers[e];t.classList.remove("_init"),t.classList.add("_active"),t.classList.contains("_active")&&_slideUp(t.nextElementSibling)}}};filterBody&&(breakpoint.addListener(breakpointChecker),breakpointChecker());const filters=document.querySelector("#filters");if(filters){function filterGoods(){const t=[...filters.querySelectorAll("#equipment input:checked")].map(e=>e.value),o=[...filters.querySelectorAll("#capacity input:checked")].map(e=>e.value),s=[...filters.querySelectorAll("#purpose input:checked")].map(e=>e.value),n=document.querySelector("#price-min").value,i=document.querySelector("#price-max").value;outputGoods(e.filter(e=>(!t.length||t.some(t=>e.equipment.includes(t)))&&(!o.length||o.some(t=>e.capacity.includes(t)))&&(!s.length||s.some(t=>e.purpose.includes(t)))&&(!n||n<=e.cost)&&(!i||i>=e.cost)))}function outputGoods(e){document.getElementById("goods").innerHTML=e.map(e=>`\n\t\t  <div itemscope itemtype="http://schema.org/Product" class="assortment__products__item product-assortment">\n\t\t\t  <a href="${e.link}" class="product-assortment__image _ibg">\n\t\t\t\t  <picture>\n\t\t\t\t\t  <source srcset="${e.image}, ../img/catalog/products/mobile/01-x2.webp 2x, ../img/catalog/products/mobile/01-x3.webp 3x" media="(max-width: 400px)" type="image/webp">\n\t\t\t\t\t  <source srcset="../img/catalog/products/mobile/01-x3.webp" media="(max-width: 767px)" type="image/webp">\n\t\t\t\t\t  <img itemprop="image" src="${e.image}" alt="Фото Барокамеры">\n\t\t\t\t  </picture>\n\t\t\t  </a>\n\t\t\t  <p class="product-assortment__status"><span class="_icon-checked"></span>В наличии</p>\n\t\t\t  <h3 itemprop="name" class="product-assortment__title">${e.name}</h3>\n\t\t\t  <div class="product-assortment__rating">\n\t\t\t\t  <span class="product-assortment__label">Рейтинг:</span>\n\t\t\t\t  <div class="product-assortment__stars"><img src="../img/footer/stars.svg" alt=""></div>\n\t\t\t  </div>\n\t\t\t  <a itemprop="url" href="${e.link}" class="btn product-assortment__btn">Купить</a>\n\n\t\t\t  <meta itemprop="description" content="${e.description}">\n\t\t\t  <span itemprop="brand" itemscope itemtype="http://schema.org/Brand">\n\t\t\t  <meta itemprop="name" content="Эверест"></span>\n\t\t\t  <span itemprop="aggregateRating" itemscope itemtype="http://schema.org/AggregateRating">\n\t\t\t\t<meta itemprop="ratingValue" content="5">\n\t\t\t\t<meta itemprop="bestRating" content="5">\n\t\t\t\t<meta itemprop="worstRating" content="1">\n\t\t\t\t<meta itemprop="ratingCount" content="6"></span>\n\t\t  </div>\n\t\t`).join("")}filters.addEventListener("input",filterGoods);const e=[{equipment:["concentrator","capsule"],name:"Эверест 1.68",cost:1e3,image:"../img/catalog/products/01.webp",purpose:["sessions","oxygenation","procedures","hypoxia","diseases","pregnancy"],capacity:["single","all"],link:"everest-1-68.html",description:"Модель барокамеры “Эверест 1,68” идеально подходит для проведения индивидуальных сеансов. Она обладает достаточной вместимостью для комфортного размещения одного человека любой комплектации."},{equipment:["concentrator","capsule"],name:"Эверест 2.52",cost:1500,image:"../img/catalog/products/02.webp",purpose:["sessions","oxygenation","procedures","hypoxia","diseases","pregnancy"],capacity:["multi","all"],link:"everest-2-52.html",description:"Модель барокамеры “Эверест 2,52” обладает наибольшей вместимостью и рекомендована для проведения групповых сеансов. Легко и комфортно внутри может разместиться до 4х человек."},{equipment:"capsule",name:"Эверест 3.2",cost:1700,image:"../img/catalog/products/03.webp",purpose:"",capacity:["single","all"],link:"#",description:""},{equipment:"capsule",name:"Эверест 4.8",cost:2400,image:"../img/catalog/products/03.webp",purpose:"",capacity:["single","all"],link:"#",description:""},{equipment:["concentrator","capsule"],name:"Эверест 1",cost:2e3,image:"../img/catalog/products/04.webp",purpose:["oxygenation","procedures","hypoxia","diseases","animals"],capacity:["single","all"],link:"#",description:""}];outputGoods(e),document.querySelector(".filter__cancel_text").addEventListener("click",(function(t){form_clean(filterBody),setTimeout(()=>{outputGoods(e)},100)}))}function form_clean(e){let t=e.querySelectorAll("input,textarea");for(let e=0;e<t.length;e++){const o=t[e];o.parentElement.classList.remove("_focus"),o.classList.remove("_focus"),o.value=o.getAttribute("data-value")}let o=e.querySelectorAll(".filter__checkbox");if(o.length>0)for(let e=0;e<o.length;e++){o[e].checked=!1}let s=e.querySelectorAll("select");if(s.length>0)for(let e=0;e<s.length;e++){const t=s[e],o=t.getAttribute("data-default");t.value=o,select_item(t)}}let tabs=document.querySelectorAll("._tabs");for(let e=0;e<tabs.length;e++){let t=tabs[e],o=t.querySelectorAll("._tabs-item"),s=t.querySelectorAll("._tabs-block");for(let e=0;e<o.length;e++){let t=o[e];t.addEventListener("click",(function(n){for(let e=0;e<o.length;e++){o[e].classList.remove("_active"),s[e].classList.remove("_active")}t.classList.add("_active"),s[e].classList.add("_active"),n.preventDefault()}))}}const videos=document.querySelectorAll(".video");let generateUrl=function(e){return"https://www.youtube.com/embed/"+e+"?rel=0&showinfo=0&autoplay=1"},createIframe=function(e){let t=document.createElement("iframe");return t.setAttribute("allowfullscreen",""),t.setAttribute("allow","autoplay; encrypted-media"),t.setAttribute("src",generateUrl(e)),t};videos.forEach(e=>{let t=e.getAttribute("data-video"),o="https://youtu.be/".length,s=t.substring(o,t.length),n=e.querySelector("source"),i=e.querySelector("img"),l="https://i.ytimg.com/vi/"+s+"/maxresdefault.jpg";n.setAttribute("srcset",l),i.setAttribute("src",l),e.addEventListener("click",t=>{t.preventDefault();let o=createIframe(s);e.querySelector("img").remove(),e.appendChild(o),e.querySelector("button").remove()})});